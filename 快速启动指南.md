# PostgreSQL å¿«é€Ÿå¯åŠ¨æŒ‡å—

æ ¹æ®ä½ çš„æƒ…å†µï¼Œé€‰æ‹©ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ï¼š

## ğŸš€ æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

è¿™æ˜¯**æœ€ç®€å•**çš„æ–¹æ³•ï¼Œä¼šåŒæ—¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚

### å‰ææ¡ä»¶
- éœ€è¦å®‰è£… Docker Desktop for Windows

### æ­¥éª¤

1. **å®‰è£… Docker Desktopï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰**
   - ä¸‹è½½ï¼šhttps://www.docker.com/products/docker-desktop/
   - å®‰è£…åé‡å¯ç”µè„‘

2. **å¯åŠ¨æ‰€æœ‰æœåŠ¡**
```powershell
cd C:\Users\10944\Desktop\Project
docker-compose up -d
```

å°±è¿™ä¹ˆç®€å•ï¼è¿™ä¼šè‡ªåŠ¨å¯åŠ¨ï¼š
- PostgreSQL æ•°æ®åº“
- åç«¯æœåŠ¡
- ML æœåŠ¡
- å‰ç«¯æœåŠ¡

3. **æŸ¥çœ‹æœåŠ¡çŠ¶æ€**
```powershell
docker-compose ps
```

---

## ğŸ“¦ æ–¹æ³•äºŒï¼šä½¿ç”¨ Dockerï¼ˆåªè¿è¡Œæ•°æ®åº“ï¼‰

å¦‚æœåªæƒ³è¿è¡Œ PostgreSQLï¼š

```powershell
docker run --name vulnrisk-postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=vulnrisk -p 5432:5432 -d postgres:15-alpine
```

æ£€æŸ¥æ˜¯å¦è¿è¡Œï¼š
```powershell
docker ps
```

---

## ğŸ’» æ–¹æ³•ä¸‰ï¼šæœ¬åœ°å®‰è£… PostgreSQL

### å®‰è£…æ­¥éª¤

1. **ä¸‹è½½ PostgreSQL**
   - è®¿é—®ï¼šhttps://www.postgresql.org/download/windows/
   - ä¸‹è½½å¹¶è¿è¡Œå®‰è£…ç¨‹åº
   - **è®°ä½ä½ è®¾ç½®çš„å¯†ç ï¼**

2. **å¯åŠ¨æœåŠ¡**

   æ–¹å¼ A - å›¾å½¢ç•Œé¢ï¼š
   - æŒ‰ `Win + R`
   - è¾“å…¥ `services.msc`
   - æ‰¾åˆ° `postgresql-x64-15`ï¼ˆç‰ˆæœ¬å¯èƒ½ä¸åŒï¼‰
   - å³é”® -> å¯åŠ¨

   æ–¹å¼ B - PowerShellï¼š
   ```powershell
   Start-Service postgresql-x64-15
   ```

3. **åˆ›å»ºæ•°æ®åº“**

   æ–¹å¼ A - ä½¿ç”¨ pgAdminï¼ˆå›¾å½¢ç•Œé¢ï¼‰ï¼š
   - æ‰“å¼€ pgAdmin
   - è¿æ¥åˆ°æœåŠ¡å™¨
   - å³é”® "Databases" -> "Create" -> "Database"
   - åç§°ï¼š`vulnrisk`
   - ä¿å­˜

   æ–¹å¼ B - ä½¿ç”¨å‘½ä»¤è¡Œï¼š
   ```powershell
   psql -U postgres
   # åœ¨ psql ä¸­è¾“å…¥ï¼š
   CREATE DATABASE vulnrisk;
   \q
   ```

4. **ä¿®æ”¹ .env æ–‡ä»¶**

   å¦‚æœå¯†ç ä¸æ˜¯ `postgres`ï¼Œç¼–è¾‘ `backend-node/.env`ï¼š
   ```env
   DATABASE_URL="postgresql://postgres:ä½ çš„å¯†ç @localhost:5432/vulnrisk?schema=public"
   ```

---

## âœ… éªŒè¯ PostgreSQL æ˜¯å¦è¿è¡Œ

è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```powershell
Test-NetConnection -ComputerName localhost -Port 5432
```

å¦‚æœæ˜¾ç¤º `TcpTestSucceeded : True`ï¼Œè¯´æ˜è¿è¡ŒæˆåŠŸï¼

---

## ğŸ¯ æ¨è

**å¯¹äºæœ¬é¡¹ç›®ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨æ–¹æ³•ä¸€ï¼ˆDocker Composeï¼‰ï¼š**

```powershell
cd C:\Users\10944\Desktop\Project
docker-compose up -d
```

ç„¶åè¿è¡Œæ•°æ®åº“è¿ç§»ï¼š

```powershell
docker-compose exec backend-node npx prisma migrate deploy
```

è¿™æ ·æ‰€æœ‰æœåŠ¡éƒ½ä¼šè‡ªåŠ¨é…ç½®å¥½ï¼

---

## â“ é‡åˆ°é—®é¢˜ï¼Ÿ

### Docker æœªå®‰è£…
- ä¸‹è½½å®‰è£… Docker Desktop
- é‡å¯ç”µè„‘åå†è¯•

### ç«¯å£è¢«å ç”¨
- æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»– PostgreSQL åœ¨è¿è¡Œ
- æˆ–ä¿®æ”¹ `.env` ä½¿ç”¨å…¶ä»–ç«¯å£ï¼ˆå¦‚ 5433ï¼‰

### è¿æ¥å¤±è´¥
- æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
- æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

æ›´å¤šè¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ `POSTGRESQL_SETUP.md`

















